## HTTP 요청과 응답 흐름 이해하기
### 브라우저의 주소창에 URL을 입력했을 때의 요청 및 응답 과정

### **1. 브라우저에서 URL 입력**

- 사용자가 웹 브라우저의 주소창에 URL을 입력합니다. 예를 들어, `https://www.example.com/index.html`과 같은 URL을 입력합니다.
- 브라우저는 URL을 구성하는 여러 요소(스킴, 도메인, 경로 등)를 분해하여 서버로 요청을 보내기 위한 준비를 합니다.

---

### **2. DNS 조회 (Domain Name System Resolution)**

- 브라우저는 URL에서 도메인 이름(예: `www.example.com`)을 확인하고, 해당 도메인에 대한 **IP 주소**를 얻기 위해 **DNS**(Domain Name System) 서버에 질의를 보냅니다.
- 만약 브라우저가 이전에 해당 IP 주소를 캐시해두었다면 DNS 조회를 생략하고 바로 해당 IP 주소로 요청을 보낼 수 있습니다.
- DNS 서버가 도메인 이름을 IP 주소로 변환하여 브라우저에 응답을 보냅니다.

---

### **3. 서버에 TCP 연결 요청**

- 브라우저는 **IP 주소**와 **포트 번호**(기본적으로 HTTP는 80, HTTPS는 443)를 사용하여 **TCP 연결**을 설정합니다.
- 이 과정에서 **3-way handshake**(3단계 핸드셰이크)가 이루어집니다.
    - **SYN**: 클라이언트가 서버에 연결 요청을 보냅니다.
    - **SYN-ACK**: 서버가 연결을 수락하고 응답합니다.
    - **ACK**: 클라이언트가 서버의 응답을 확인하고 연결을 완료합니다.

---

### **4. HTTP 요청 전송**

- **TCP 연결**이 완료되면, 브라우저는 **HTTP 요청**을 서버에 보냅니다.
    - 요청에는 다음과 같은 정보가 포함됩니다:
        - **메소드** (GET, POST 등)
        - **URL 경로** (예: `/index.html`)
        - **헤더** (브라우저 정보, 쿠키 등)
        - **쿼리 파라미터** (필요시)
        - **본문** (POST 요청 시)
    - 예시: `GET /index.html HTTP/1.1`과 같은 형태로 서버에 요청을 보냅니다.

---

### **5. 서버에서 HTTP 요청 처리**

- 서버는 요청을 받으면, 이를 처리하기 위해 웹 서버가 동작합니다.
    - 요청된 **URL 경로**에 해당하는 파일을 찾거나, 데이터베이스와 연동하여 동적으로 페이지를 생성합니다.
    - 요청이 처리되면 서버는 **HTTP 응답**을 생성하여 클라이언트에게 보냅니다.
        - 응답에는 상태 코드(예: 200 OK, 404 Not Found 등), 응답 헤더, 응답 본문 등이 포함됩니다.

---

### **6. HTTP 응답 전송**

- 서버가 생성한 HTTP 응답을 브라우저로 전송합니다.
    - 응답에는 페이지 콘텐츠(HTML, CSS, JavaScript, 이미지 등)와 함께 상태 코드가 포함됩니다.
    - 브라우저는 응답을 받아서 페이지를 렌더링합니다.

---

### **7. 브라우저에서 페이지 렌더링**

- 브라우저는 받은 HTML 콘텐츠를 화면에 표시합니다.
    - HTML을 파싱하여 DOM(Document Object Model)을 생성하고, CSS와 JavaScript를 처리하여 최종적으로 화면에 표시합니다.
    - 추가적인 리소스(이미지, CSS, JavaScript 등)가 필요한 경우에는 **추가적인 HTTP 요청**을 서버로 보냅니다.
    - 페이지가 완전히 로드되면, 사용자는 해당 웹 페이지를 볼 수 있습니다.

---

### **8. 연결 종료**

- 페이지가 완전히 로드되면, TCP 연결은 종료됩니다. HTTPS의 경우 **TLS 세션**도 종료됩니다.
    - **TCP 연결 종료** 과정은 4단계의 핸드셰이크로 이루어집니다.

---

### **요청 및 응답 흐름 다이어그램**

```
+---------------------+     +---------------------------+
|  브라우저의 주소창  |     |    DNS 서버              |
|   (URL 입력)        |     |  (IP 주소 반환)          |
+---------------------+     +---------------------------+
          |                           |
          v                           v
+---------------------+     +---------------------------+
|   DNS 조회          | ----> |  도메인 이름 -> IP 주소   |
+---------------------+     +---------------------------+
          |                           |
          v                           v
+---------------------+     +---------------------------+
|   TCP 연결 요청     | <----> |  3-way Handshake (SYN,    |
|   (SYN, SYN-ACK,     |     |   ACK, ACK)               |
|    ACK)              |     |                           |
+---------------------+     +---------------------------+
          |                           |
          v                           v
+---------------------+     +---------------------------+
|   HTTP 요청         | ----> |   HTTP 서버 처리 및 응답  |
|   (GET, POST 등)    |     |  (상태 코드, 헤더, 본문)  |
+---------------------+     +---------------------------+
          |                           |
          v                           v
+---------------------+     +---------------------------+
|   서버 응답         | <----> |  HTTP 응답 전송           |
|  (HTML, 상태 코드)  |     |                           |
+---------------------+     +---------------------------+
          |                           |
          v                           v
+---------------------+     +---------------------------+
|  페이지 렌더링      | ----> |  브라우저 화면 표시       |
| (DOM 생성, CSS, JS) |     |                           |
+---------------------+     +---------------------------+
          |
          v
+---------------------+
|   연결 종료         |
| (TCP, TLS 종료)     |
+---------------------+

```

---

### **각 단계 설명**

1. **브라우저의 주소창에 URL 입력**: 사용자가 웹사이트 주소를 입력하여 요청을 시작합니다.
2. **DNS 조회**: 도메인 이름을 IP 주소로 변환하여, 서버에 접근할 수 있도록 합니다.
3. **TCP 연결 요청**: 브라우저가 서버와 연결하기 위해 TCP 3-way handshake를 수행합니다.
4. **HTTP 요청 전송**: 브라우저가 서버에 HTTP 요청을 보냅니다. 이때 요청 메소드(GET, POST 등)와 경로, 헤더 등이 포함됩니다.
5. **서버에서 HTTP 요청 처리**: 서버가 요청을 받아 처리하고, 필요한 데이터를 반환하거나 파일을 반환합니다.
6. **HTTP 응답 전송**: 서버가 처리한 내용을 HTTP 응답으로 브라우저에 전달합니다.
7. **브라우저에서 페이지 렌더링**: 브라우저는 받은 HTML, CSS, JavaScript를 해석하여 화면에 웹 페이지를 표시합니다.
8. **연결 종료**: 페이지 렌더링이 완료되면 TCP 및 TLS 연결이 종료됩니다.

---

### **결론**

- 브라우저에서 URL을 입력하고 웹 페이지를 로드하는 과정은 **DNS 조회**부터 시작하여 **HTTP 요청 및 응답 처리**를 통해 이루어집니다.
- 이 과정을 통해 브라우저는 서버와 통신하고, 최종적으로 사용자가 볼 수 있는 웹 페이지를 화면에 렌더링합니다.